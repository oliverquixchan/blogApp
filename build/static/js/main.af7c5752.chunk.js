(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{80:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(25),s=n.n(a),i=n(9),u=n(7),o=n.n(u),l=n(10),j=n(36),d=n(14),b=n(17),h=n(82),p=n(1),f=function(e){var t=e.blog,n=e.somebodyLikedOMG,c=e.handleDelete,a=Object(r.useState)(!1),s=Object(d.a)(a,2),i=s[0],u=s[1];return!1===i?Object(p.jsxs)("tr",{children:[Object(p.jsxs)("td",{className:"blogDisplay",children:[Object(p.jsx)(b.b,{to:"/blog/".concat(t.id),children:Object(p.jsxs)("p",{children:[t.title," "]})}),Object(p.jsxs)("p",{children:[t.author," "]})]}),Object(p.jsx)("td",{children:Object(p.jsx)(h.a,{variant:"success",onClick:function(){return u(!i)},children:"show"})})]}):Object(p.jsxs)("tr",{children:[Object(p.jsxs)("td",{className:"blogDisplay",children:[Object(p.jsx)(b.b,{to:"/blog/".concat(t.id),children:Object(p.jsxs)("p",{children:[t.title," "]})}),Object(p.jsxs)("p",{children:[t.author," "]}),Object(p.jsx)("p",{children:t.url}),Object(p.jsxs)("p",{id:"like",children:[t.likes," ",Object(p.jsx)(h.a,{size:"sm",id:"likeButton",onClick:n,children:"like!"})," "]}),Object(p.jsx)(h.a,{variant:"danger",size:"sm",onClick:c,children:"delete"})]}),Object(p.jsx)("td",{children:Object(p.jsx)(h.a,{variant:"success",onClick:function(){return u(!i)},children:"hide details"})})]})},O=n(20),x=n.n(O),m={login:function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(e){return{type:"CHANGE",data:e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE":return t.data;case"RESET":return null;default:return e}},y=n(8),w=function(e){return{type:"ADDUSER",data:e}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADDUSER":return t.data;default:return e}},N=n(85),E=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(d.a)(a,2),i=s[0],u=s[1],j=Object(y.b)(),b=function(){var e=Object(l.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,m.login({username:n,password:i});case 4:r=e.sent,window.localStorage.setItem("loggedUser",JSON.stringify(r)),j(w(r)),c(""),u(""),j(v("Logged in")),setTimeout((function(){j({type:"RESET"})}),5e3),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),j(v("Wrong credentials")),setTimeout((function(){j({type:"RESET"})}),5e3);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"container justify-content-center",children:Object(p.jsx)(N.a,{onSubmit:b,className:"justify-content-center",children:Object(p.jsxs)(N.a.Group,{children:[Object(p.jsxs)("p",{children:["username: ",Object(p.jsx)("input",{id:"username",type:"text",value:n,name:"Username",onChange:function(e){var t=e.target;return c(t.value)}})]}),Object(p.jsxs)("p",{children:["password: ",Object(p.jsx)("input",{id:"password",type:"password",value:i,name:"Username",onChange:function(e){var t=e.target;return u(t.value)}})]}),Object(p.jsx)(h.a,{id:"login-button",type:"submig",children:"login"})]})})})},S=function(){var e=Object(y.b)(),t=Object(y.c)((function(e){return e.user}));return Object(p.jsxs)("p",{children:[t.username," is logged in ",Object(p.jsx)(h.a,{onClick:function(){window.localStorage.removeItem("loggedUser"),e(w(null)),e(v("Logged out")),setTimeout((function(){e({type:"RESET"})}),5e3)},variant:"dark",size:"sm",children:"logout"})]})},T=function(e){var t=e.createNewBlog,n=Object(r.useState)(""),c=Object(d.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(""),u=Object(d.a)(i,2),o=u[0],l=u[1],j=Object(r.useState)(""),b=Object(d.a)(j,2),h=b[0],f=b[1];return Object(p.jsx)("div",{children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({title:a,author:o,url:h}),s(""),f(""),l("")},children:[Object(p.jsxs)("p",{children:["title: ",Object(p.jsx)("input",{id:"title",type:"text",value:a,name:"title",onChange:function(e){var t=e.target;return s(t.value)}})]}),Object(p.jsxs)("p",{children:["author: ",Object(p.jsx)("input",{id:"author",type:"text",value:o,name:"author",onChange:function(e){var t=e.target;return l(t.value)}})]}),Object(p.jsxs)("p",{children:["url: ",Object(p.jsx)("input",{id:"url",type:"text",value:h,name:"url",onChange:function(e){var t=e.target;return f(t.value)}})]}),Object(p.jsx)("button",{id:"submit-new-entry",type:"submit",children:"submit"})]})})},I=function(){var e=Object(y.c)((function(e){return e.message}));return null===e?null:"Wrong credentials"===e?Object(p.jsx)("div",{className:"error",children:e}):"Logged in"===e||"Blog created"===e?Object(p.jsx)("div",{className:"success",children:e}):"Blog invalid"===e?Object(p.jsx)("div",{className:"error",children:e}):"Logged out"===e?Object(p.jsx)("div",{className:"success",children:e}):void 0},D=c.a.forwardRef((function(e,t){var n=Object(r.useState)(!1),c=Object(d.a)(n,2),a=c[0],s=c[1],i={display:a?"none":""},u={display:a?"":"none"},o=function(){s(!a)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:o}})),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{style:i,children:Object(p.jsx)(h.a,{onClick:o,children:e.buttonLabel})}),Object(p.jsxs)("div",{style:u,children:[e.children,Object(p.jsx)(h.a,{onClick:o,children:"cancel"})]})]})}));D.displayName="Togglable";var C=D,A="http://localhost:3003/api/blogs",B=null,L={getAll:function(){return x.a.get(A).then((function(e){return e.data}))},create:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:B}},e.next=3,x.a.post(A,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){B="bearer ".concat(e)},update:function(){var e=Object(l.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.put("".concat(A,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:B}},e.next=3,x.a.delete("".concat(A,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),comment:function(){var e=Object(l.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("".concat(A,"/").concat(t,"/comments"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},R=function(e){return function(){var t=Object(l.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.remove(e);case 3:n({type:"DELETE",data:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIATING":return t.data;case"ADD":return e.concat(t.data);case"UPDATE":return e.map((function(e){return e.id!==t.data.updatedBlog.id?e:t.data.updatedBlog}));case"DELETE":return e.filter((function(e){return e.id!==t.data}));case"COMMENT":return e.map((function(e){return e.id!==t.data.commentedBlog.id?e:t.data.commentedBlog}));default:return e}},G=n(83),M=function(){var e=Object(y.c)((function(e){return e.blogs})),t=Object(y.c)((function(e){return e.user})),n=Object(y.b)(),c=Object(r.useRef)(),a=function(t){var r=e.find((function(e){return e.id===t})),c=Object(j.a)(Object(j.a)({},r),{},{likes:r.likes+1});n(function(e,t){return function(){var n=Object(l.a)(o.a.mark((function n(r){var c;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,L.update(e,t);case 3:c=n.sent,r({type:"UPDATE",data:{updatedBlog:c}}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}(t,c))},s=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm("Delete blog ".concat(t.title," by ").concat(t.author,"? "))&&n(R(t.id));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null===t?Object(p.jsxs)("div",{className:"container text-center",children:[Object(p.jsx)("h2",{children:"Login"}),Object(p.jsx)(I,{}),Object(p.jsx)(E,{})]}):Object(p.jsxs)("div",{className:"container",children:[Object(p.jsxs)("div",{className:"text-center mb-3",children:[Object(p.jsx)("h2",{children:"blogs"}),Object(p.jsx)(I,{}),Object(p.jsx)(C,{buttonLabel:"create entry",ref:c,children:Object(p.jsx)(T,{createNewBlog:function(e){n(function(e){return function(){var t=Object(l.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.create(e);case 3:r=t.sent,n({type:"ADD",data:r}),n(v("Blog created")),setTimeout((function(){n({type:"RESET"})}),5e3),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n(v("Blog invalid")),setTimeout((function(){n({type:"RESET"})}),5e3);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(e)),c.current.toggleVisibility()}})})]}),Object(p.jsxs)(G.a,{striped:!0,className:"mb-3",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Entry"}),Object(p.jsx)("th",{children:"Details"})]})}),Object(p.jsx)("tbody",{children:e.map((function(e){return Object(p.jsx)(f,{blog:e,somebodyLikedOMG:function(){return a(e.id)},handleDelete:function(){return s(e)}},e.id)}))})]}),Object(p.jsx)("div",{className:"text-center",children:Object(p.jsx)(S,{})})]})},z=function(){var e=Object(y.c)((function(e){return e.users}));return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Users"}),e.map((function(e){return Object(p.jsx)(b.b,{to:"/user/".concat(e.id),children:Object(p.jsx)("div",{children:Object(p.jsxs)("p",{children:[e.name," ",e.blogs.length]})})},e.id)}))]})},H=n(84),J=function(){return Object(p.jsx)("div",{children:Object(p.jsxs)(H.a,{className:"justify-content-center",as:"ul",children:[Object(p.jsx)(H.a.Item,{as:"li",children:Object(p.jsx)(H.a.Link,{href:"#",as:"span",children:Object(p.jsx)(b.b,{to:"/",children:"Home"})})}),Object(p.jsx)(H.a.Item,{as:"li",children:Object(p.jsx)(H.a.Link,{href:"#",as:"span",children:Object(p.jsx)(b.b,{to:"/users",children:"Users"})})})]})})},W=function(e){var t=e.user;return t?Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:t.name}),Object(p.jsx)("h2",{children:" added blogs "}),Object(p.jsx)("ul",{children:t.blogs.map((function(e){return Object(p.jsx)("li",{children:e.title},e.id)}))})]}):null},P=n(86),V=function(e){var t=e.blog,n=Object(r.useState)(""),c=Object(d.a)(n,2),a=c[0],s=c[1],i=Object(y.b)(),u=Object(y.c)((function(e){return e.users})).find((function(e){return e.name===t.user.name}));return t?Object(p.jsx)("div",{className:"d-flex justify-content-center",children:Object(p.jsxs)(P.a,{style:{width:"18rem"},className:"p-4",children:[Object(p.jsxs)("div",{className:"text-center",children:[Object(p.jsx)("h1",{className:"text-center",children:t.title}),Object(p.jsxs)("p",{className:"text-center",children:["link: ",Object(p.jsx)("a",{href:"",children:t.url})]}),Object(p.jsxs)("p",{children:[t.likes," likes"]}),u?Object(p.jsxs)("p",{children:["by: ",u.name]}):null]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h4",{children:"Comments"}),t.comments===[]?Object(p.jsx)("p",{children:"No comments yet."}):t.comments.map((function(e){return Object(p.jsx)("p",{children:e},e)}))]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h5",{children:"Add comment:"}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i(function(e,t){return function(){var n=Object(l.a)(o.a.mark((function n(r){var c;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,L.comment(e,t);case 3:c=n.sent,r({type:"COMMENT",data:{commentedBlog:c}}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}(t.id,{comment:a})),s("")},children:[Object(p.jsx)("input",{className:"mb-2",id:"url",type:"text",value:a,name:"comment",onChange:function(e){var t=e.target;return s(t.value)}}),Object(p.jsx)("button",{className:"mb=2",type:"submit",children:"submit"})]})]})]})}):null},q=function(){return x.a.get("http://localhost:3003/api/users").then((function(e){return e.data}))},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIATINGUSERS":return t.data;default:return e}},K=function(){var e=Object(y.b)(),t=Object(y.c)((function(e){return e.users})),n=Object(y.c)((function(e){return e.blogs})),c=Object(i.f)("/user/:id"),a=c?t.find((function(e){return e.id===c.params.id})):null,s=Object(i.f)("/blog/:id"),u=s?n.find((function(e){return e.id===s.params.id})):null;return Object(r.useEffect)((function(){e(function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getAll();case 2:n=e.sent,t({type:"INITIATING",data:n.sort((function(e,t){return e.likes<t.likes?1:-1}))});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(r.useEffect)((function(){e(function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:n=e.sent,t({type:"INITIATINGUSERS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(r.useEffect)((function(){var t=window.localStorage.getItem("loggedUser");if(t){var n=JSON.parse(t);e(w(n)),L.setToken(n.token)}}),[]),Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(J,{}),Object(p.jsxs)(i.c,{children:[Object(p.jsx)(i.a,{path:"/users",children:Object(p.jsx)(z,{})}),Object(p.jsx)(i.a,{path:"/user/:id",children:Object(p.jsx)(W,{user:a})}),Object(p.jsx)(i.a,{path:"/blog/:id",children:Object(p.jsx)(V,{blog:u})}),Object(p.jsx)(i.a,{path:"/",children:Object(p.jsx)(M,{})})]})]})},Q=(n(80),n(21)),X=n(47),Y=n(48),Z=Object(Q.combineReducers)({blogs:U,user:k,message:g,users:F}),$=Object(Q.createStore)(Z,Object(Y.composeWithDevTools)(Object(Q.applyMiddleware)(X.a)));s.a.render(Object(p.jsx)(b.a,{children:Object(p.jsx)(y.a,{store:$,children:Object(p.jsx)(K,{})})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.af7c5752.chunk.js.map